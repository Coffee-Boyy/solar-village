services:
  ushahidi:
    image: {{ ushahidi_image }}
    container_name: ushahidi
    restart: always
    network_mode: host
    environment:
      BASE_URL: "{{ ushahidi_site_url }}"
      ENABLE_NGINX: "false"

      DB_CONNECTION: "mysql"
      DB_HOST: {{ wg_ip }}
      DB_PORT: 3306
      DB_DATABASE: "{{ mysql_db }}"
      DB_USERNAME: "{{ mysql_app_user }}"
      DB_PASSWORD: "{{ mysql_app_password }}"

      S3_BUCKET: "{{ garage_bucket_name }}"
      S3_ENDPOINT: "http://{{ wg_ip }}:3900"
      S3_ACCESS_KEY: "{{ garage_access_key_id }}"
      S3_SECRET_KEY: "{{ garage_secret_access_key }}"
      S3_REGION: "{{ garage_s3_region }}"
      S3_USE_PATH_STYLE_ENDPOINT: "true"
